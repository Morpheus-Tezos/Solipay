## README.md

## Project main goal

üìåSolipays protocol is born from our willingness to place decentralized finance at the service of mainstream market et humanitary fundations working for planet's well-being.
ERC20 depositors will benefits of secured investments products with hight yield comparing to traditionnal financial services. So those invesments both generate yield and fund humanitary projects.

For each deposit, you will receive at prorated amount voting power to select, during a vote,
your prefered fundations and projects to help with funds generated by the community.


# Installation

- Install npm
- Install the Solidity Compiler version 0.6.11
- Clone the Github repository

```
git clone @github.com/0xSaitama/Solipay
```

- Install the npm packages for the back-end and the front-end

Install the npm packages for the back-end
```
npm install
```
‚ÑπÔ∏è You will need to update pragma solidity version in
@uniswap/v2-periphery/libraries/SafeMath.sol for 0.6.11

Install the npm packages for the front-end
```
cd client
npm install
```

# Configuration

## Environment Parameters

You will need to create a .env file in the project's root folder. It will store specific deployment parameters and your Infura project identifier.
1. Create a .env in your project folder
2. Replace the following parameters with yours:
```
MNEMONIC          = "Your_own_12_words_seed_here"
INFURA_PROJECT_ID = "Your_infura_project_id_here"
```

‚ÑπÔ∏è Keep in mind to surround each value with double quotes.

## Deploy   

You need to deploy all of our smart-contracts  Stacking.sol, ProxySimple.sol, Borrow.sol, OracleSimplePair.sol and the ReactJS app - DApp (front-end).

## Deploy on a Test Network

### Deploy the contracts on the ropsten test kovan
```
npm truffle deploy --network kovan
```

Update the contract addresses in the file doc/deployed_addresses.md.

## Contracts Addresses
The file doc/deployed_addresses.md contains the address of each smart-contract deployed on the Ropsten testnet.

## Deploy Front-End

Local Deployment:
Nothing to do.

## Run

Run the local DApp:
In order to run the Front-End application on your local machine:

```
cd client
npm start
```

## Open the App

Open the local DApp: https://localhost:3000/

## Test

[This page](https://github.com/0xSaitama/Solipay/blob/master/tests_explication.md) explains what we test and how.

Run ganache on port 7545 beforehand
```
npm truffle deploy --reset --network kovan

npm truffle test # Run the unit and integration tests
```

## Code Coverage

Runs the tests then displays a report of the smart-contracts code coverage.
```
npm run coverage
```

## Gas Report

To get a report of the gas consumed by the smart-contracts while running the tests.
```
npm run gas
```

## Decisions

The Design Pattern Decisions are explained in details here : https://github.com/0xSaitama/Solipay/blob/master/design_pattern_desicions.md

### User interaction process.

- A new user is welcomed on this app and can directly make an ERC20 deposit in the fund.
- A vote session is live, user can vote with a prorated voting power for his top 4 projects
- His timeLock deposit is over. The user an request a withdraw amount from his deposits
- We, as owner of the contract, process the withdraw to give back investments and yields to user


### Visual Studio Code / Atom

### Coding languages : Solidy, ReactJS

### Framework : Truffle unbox React

### Network : kovan

## ProxySimple Contract

The smart contract defines the following events :
```
event valideDepot(address client, uint amount);
event authorizedWithdrawal(address client, uint amount);
event withdrawn(uint amount);
```

## Borrow Contract
The smart contract defines the following events :
```
event EntityRegistered(address[] soliAddress);
event ProposalsRegistrationStarted();
event ProposalsRegistrationEnded();
event ProposalRegistered(uint loanRequestId);
event VotingSessionStarted();
event VotingSessionEnded();
event Voted(address entity, uint loanRequestId);
event VotesTallied();
event WorkflowStatusChange(WorkflowStatus previousStatus, WorkflowStatus newStatus);
event receiverAddressUpdated(address receiver);
```
